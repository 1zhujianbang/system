# MarketLens 项目升级执行计划 - 阶段一：准备与基础构建

## 阶段目标
建立坚实的数据基础和架构迁移，确保项目兼容最先进工具，为后续阶段打下基础。

## 具体执行计划

### 1. 数据源整合

#### 1.1 GDELT 数据接入模块开发
  - 利用GDELT库函数实现
  - 处理 61 列结构化事件数据（GLOBALEVENTID、Actor1/2Name、EventCode、SQLDATE 等）

#### 1.2 数据处理流水线
  - 使用 pandas 和 Dask 构建大规模数据处理框架
  - 实现实体标准化（去重 ActorName）
  - 提取角色信息（Actor1 为施事者，Actor2 为受事者）
  - 时间戳提取和格式化

#### 1.3 GKG 文件集成
  - 集成 GKG 文件增强主题/情感分析
  - 开发主题标签提取功能
  - 实现情感分析模块

#### 1.4 实时数据流集成
  - 集成 Apache Kafka 流处理管道
  - 实现增量摄入机制
  - 开发数据流监控面板

### 2. 存储迁移

#### 2.1 图数据库选型与部署
  - 对比 Neo4j 与 FalkorDB 特性
  - 完成图数据库选型决策
  - 部署测试环境

#### 2.2 数据迁移方案
  - 导出当前 SQLite 数据到 CSV 格式
  - 使用 Neo4j 的 APOC 库开发导入脚本
  - 验证数据完整性

#### 2.3 本体设计
  - 定义本体（Ontology）使用 OWL 框架
  - 明确实体类型（人物、组织等）
  - 设计事件模式（CAMEO 代码）
  - 定义关系类型（"参与"、"影响"等）

### 3. LLM 增强

#### 3.1 GraphRAG 框架集成
  - 集成 Agentic GraphRAG 框架
  - 实现自动化实体抽取功能
  - 开发关系推理模块

#### 3.2 开源模型支持
  - 集成 Llama 3 模型支持
  - 实现多模态输入处理（文本+图像）
  - 优化成本控制机制

#### 3.3 偏见检测机制
  - 实现差分隐私保护机制
  - 开发数据质量检测模块
  - 建立偏见评估指标体系

### 4. 基础知识图谱构建

#### 4.1 实体-事件关系图谱
  - 使用 networkx 构建原型
  - 实现"谁做了什么"问题解答功能

#### 4.2 实体-事件时序图谱
  - 实现事件链排序功能
  - 开发时序查询接口

#### 4.3 实体-实体关系图谱
  - 构建静态网络图谱
  - 实现 Cypher 查询接口

## 里程碑交付物
1. GDELT 数据接入模块
2. 图数据库部署与迁移方案
3. GraphRAG 框架集成
4. 基础知识图谱原型

## 风险评估与应对措施
- **数据规模挑战**: 使用 Dask 处理大规模数据
- **迁移风险**: 制定详细的数据备份和回滚计划
- **性能瓶颈**: 提前进行压力测试

## 资源需求
- 云资源: AWS/GCP 计算实例
- 第三方服务: GDELT 数据访问权限