# 工作流说明文档（一般性流程）

本项目的日常开发与迭代建议遵循以下通用工作流，用于保证：任务目标清晰、实现可追溯、函数文档与计划同步更新。

---

## 1. 从 tasks/ 阅读相关任务

- 打开 `tasks/` 下对应阶段或主题的任务文件，定位本次要处理的条目与范围。
- 明确本次交付物：
  - 需要新增/修改哪些能力（接口、服务、页面、脚本等）
  - 需要更新哪些数据结构/协议（如快照协议、schema 版本）
  - 需要补齐哪些验证项（运行、导入、统计对账等）

---

## 2. 决定要做的任务后，在 docs/ 写设计文档

- 在 `docs/` 下新增或补充一份设计文档，内容以“可直接指导实现”为准。
- 设计文档建议包含：
  - 背景与目标：为什么做、做到什么程度算完成
  - 范围与非目标：明确不做什么，避免无边界扩张
  - 方案概述：核心思路、关键流程、主要组件
  - 数据与协议：输入/输出、字段约束、兼容策略、版本化策略
  - 关键接口：对外暴露的函数/类/服务方法签名（如已有就引用路径）
  - 失败处理：异常、回滚、幂等、重试、数据一致性
  - 验证方式：如何自测、用什么脚本/页面/统计检查成功

---

## 3. 按照设计文档实现相关业务逻辑

- 严格以设计文档为实现依据：
  - 优先修改既有实现，避免不必要的新模块
  - 保持数据结构与协议一致，避免“实现与文档分叉”
- 实现完成后进行必要验证（例如：运行流程、生成快照、数据计数对账、导入连通性等）。

---

## 4. 更新函数说明文档

- 在 `docs/函数说明文档.md` 中补充或修正本次变更涉及的函数/类说明，确保：
  - 路径/模块名真实存在且与代码一致
  - 示例代码可运行或至少能正确导入
  - 参数、返回值、关键异常与边界行为有明确描述

---

## 5. 更新 tasks/ 的相关任务表

- 回到 `tasks/` 中对应任务文件：
  - 将已完成项标记为完成（或移动到“已完成”区域）
  - 将本次实现中发现的新增工作拆分为后续任务（保持可执行、可验收）
  - 更新里程碑状态与下一步计划，保证“计划与现实一致”

